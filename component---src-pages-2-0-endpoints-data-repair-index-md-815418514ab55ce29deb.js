(self.webpackChunkanalytics_apis=self.webpackChunkanalytics_apis||[]).push([[9108],{4257:function(e,t,a){"use strict";a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return l}});var i=a(2122),n=a(9756),o=(a(5007),a(4983)),r=a(9536),s={},d={_frontmatter:s},p=r.Z;function l(e){var t=e.components,a=(0,n.Z)(e,["components"]);return(0,o.mdx)(p,(0,i.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"data-repair-api"},"Data Repair API"),(0,o.mdx)("p",null,"The Data Repair API provides you with a way to delete or edit Adobe Analytics data.  Repair requests are made by submitting a job definition to the Data Repair API, which includes the report suite, date range, variables and actions to be applied to the data."),(0,o.mdx)("p",null,"The Data Repair API supports the following:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Variables: eVars, props, activity map, campaign, site section, page, entry page, geography, and page events.  ",(0,o.mdx)("a",{parentName:"li",href:"#variables"},"See full list of variables to act on.")),(0,o.mdx)("li",{parentName:"ul"},"Actions: delete, set, deleteQueryString, and deleteQueryStringParameters.  ",(0,o.mdx)("a",{parentName:"li",href:"#actions"},"All actions to take on a given variable.")),(0,o.mdx)("li",{parentName:"ul"},"Filters: inList, isEmpty, isURL, isNotURL, contains, startsWith, and endsWith.  ",(0,o.mdx)("a",{parentName:"li",href:"#filters"},"More details on optional filters."))),(0,o.mdx)("p",null,"The Data Repair API returns:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"The Server Call volume estimate for the data repair job"),(0,o.mdx)("li",{parentName:"ul"},"The job id"),(0,o.mdx)("li",{parentName:"ul"},"The status of a submitted job id"),(0,o.mdx)("li",{parentName:"ul"},"A list of all data repair jobs for a report suite")),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},"WARNING: Use of the Data Repair API permanently deletes existing Adobe Analytics data. Adobe recommends a careful approach to executing the repair to minimize accidental deletion. Read through all pages of this guide before using the Data Repair API.")),(0,o.mdx)("h2",{id:"getting-started"},"Getting Started"),(0,o.mdx)("p",null,"To begin using the Data Repair API, there are four requirements:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("strong",{parentName:"li"},"Confirm contract"),": The Data Repair API is a paid service. Reach out to your Adobe Account Manager for details and confirmation of your status.")),(0,o.mdx)("h4",{id:"2-create-a-service-account-connection-within-adobe-io"},"2.\tCreate a Service Account Connection within Adobe I/O"),(0,o.mdx)("p",null,"A Service Account Connection allows the Data Repair API to call Adobe services.  For information on how to set up the connection, follow the instructions described in the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-auth/blob/stage/AuthenticationOverview/ServiceAccountIntegration.md"},"Service Account Connection")," documentation.   You can configure the Connection with access to the Adobe Analytics APIs.  During the process, you will generate a key pair and download the private key.  Store the API Key / Client ID associated with the Service Account Connection securely.  This is used when accessing the Data Repair API. "),(0,o.mdx)("p",null,"See ",(0,o.mdx)("a",{parentName:"p",href:"../../getting-started/index.md"},"Getting started"),' for information around the correct permissions, creating an API client in the Adobe I/O Console, and successfully authenticating. Make sure that you include the "Data Repair API" permission item when creating a product profile.'),(0,o.mdx)("h4",{id:"3-grant-the-data-repair-api-permission-to-the-new-service-account-connection-in-the-experience-cloud"},"3. Grant the Data Repair API permission to the new Service Account Connection in the Experience Cloud"),(0,o.mdx)("p",null,"Adobe Experience Cloud Admin Console includes product profile controls. Product profiles have Adobe Analytics-specific User permissions for managing integration access to reporting features and data."),(0,o.mdx)("p",null,"The Data Repair API permission is located under the Adobe Analytics Report Suite Tools permission group."),(0,o.mdx)("p",null,(0,o.mdx)("img",{parentName:"p",src:"images/data-repair-permission.png",alt:"data repair permission"})),(0,o.mdx)("p",null,"For more information on creating profiles and managing permissions, see ",(0,o.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/enterprise/using/manage-products-and-profiles.html"},"Manage Products and Profiles")," and ",(0,o.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/enterprise/using/manage-permissions-and-roles.html"},"Manage Permissions and Roles"),"."),(0,o.mdx)("h4",{id:"4-create-a-json-web-token"},"4.\tCreate a JSON Web Token"),(0,o.mdx)("p",null,"In order to establish a secure service-to-service Adobe I/O API session, create a JSON Web Token (JWT) that encapsulates the identity of the product integration, and then exchange it for an access token. Every request to an Adobe service must include the access token in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Authorization header"),", along with the ",(0,o.mdx)("inlineCode",{parentName:"p"},"API Key / Client ID")," associated with the Service Account Connection.  For more information about creating a JWT access token, see ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-auth/blob/stage/JWT/JWT.md"},"JWT Authentication"),".  For instructions on testing your JWT, see Step 3 in the  ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-auth/blob/stage/AuthenticationOverview/ServiceAccountIntegration.md#step-3-try-it"},"Service Account Connection")," documentation."),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},"NOTE: A new access token must be created before each use of the Data Repair API.")),(0,o.mdx)("h2",{id:"submit-a-data-repair-job"},"Submit a data repair job"),(0,o.mdx)("p",null,"To submit a data repair job, there are three steps:"),(0,o.mdx)("h4",{id:"1-estimate-repair-size"},"1. Estimate repair size"),(0,o.mdx)("p",null,"The Data Repair API incurs charges based on usage.  It scans every row of data looking for repairs, job sizing is based on rows scanned.  The ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint is a required step to help you estimate the cost of a repair. The ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint returns a count of the Server Call volume for the report suite date range. The endpoint also returns a ",(0,o.mdx)("inlineCode",{parentName:"p"},"validationToken"),", which is required for the job creation call."),(0,o.mdx)("h4",{id:"2-create-repair"},"2. Create repair"),(0,o.mdx)("p",null,"To create a data repair job, use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint. This endpoint requires a Report Suite, date range, ",(0,o.mdx)("inlineCode",{parentName:"p"},"validationToken")," (from ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate"),"), and a job definition, which specifies the variables to be repaired.  A Job ID is returned when a repair job is created. "),(0,o.mdx)("h4",{id:"3-monitor-progress"},"3. Monitor progress"),(0,o.mdx)("p",null,"Use the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/job/{JOB_ID}")," endpoint to monitor the status of a job at any point after job submission.  Completion of a repair job may take hours to days."))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-2-0-endpoints-data-repair-index-md-815418514ab55ce29deb.js.map